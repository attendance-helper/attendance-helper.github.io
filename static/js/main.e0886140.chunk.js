(this["webpackJsonpattendance-helper"]=this["webpackJsonpattendance-helper"]||[]).push([[0],{124:function(a,e){},125:function(a,e){},134:function(a,e,n){},135:function(a,e,n){},141:function(a,e){},143:function(a,e){},155:function(a,e){},157:function(a,e){},182:function(a,e){},184:function(a,e){},185:function(a,e){},190:function(a,e){},192:function(a,e){},211:function(a,e){},223:function(a,e){},226:function(a,e){},259:function(a,e){},260:function(a,e){},261:function(a,e){},262:function(a,e,n){"use strict";n.r(e);var t=n(6),o=n.n(t),r=n(126),i=n.n(r),s=(n(134),n(35)),l=n(63),c=n(28),u=n(64),h=n(11),d=(n(135),n(0)),g=n.n(d),f=n(264),p=[["Abdullahi, Dararsa Moussa","Akkawi, Zaid Kayed","Altaweel, Abdullah Aqeel A","An, Reuben","Anand, Vishruth","Andry, Marie Anyolie","Ardhapurkar, Amogh","Arnold, Henry Debolt","Arnold, Xavier Charles","Asad, Serhan","Auh, Christian Jooahn","Balaji, Neha Nivedita","Barnes, William Roy","Bhuyan, Nadimul Hasan","Biswas, Inesh","Bompelly, Anvith","Bouamrani, Adam","Bui, John Michael","Burac, Samuel R"],["Burgess, Bralon","Caballero, Erick Alexander","Chakraborty, Aishani","Chakravarthy, Aishwarya Echur","Chang, Angela","Chang, Tsun-Chin","Charugundla, Vineeth","Chauhan, Yashkaran","Cheah, Calvin","Chen, Andrew G","Chisholm, Lily Seika","Chittineni, Anusree","Crutcher, Kaitlyn Chapman","Dalvi, Ria","Damene, Talem","De Alvaro Mena, Monica","Desai, Sarang","Devaraju, Shreya Homapriya","Dhakal, Shaswat","Dibartolo, Trinity Elaine Eloise"],["DiBiasio, Andrew Michael Silveira","Dineshkumar, Sanjjithsaai","Ding, Brandon Dexon","Douglass, Evan Dale","Duan, Daniel Lee","Duke, Lana","Fain, Alison Elisabeth","Gandhi, Devan Taal","Garg, Keshav","George, Rohit Koshy","Girard, Amanda K","Glamm, Hannah Louise","Greer, Dillon Rowe","Guo, Patrick","Guru, Vibha","Hakes, Colin Patrick","Hill, Graham Hodges","Holliger, Lukas John","Honore, Michaelah","Hou, Madeline Liu"],["Huang, Tyler Toshio","Huggins, Owen Scott","Hwang, Jinseok","Jackson, Christopher Jalen","Jackson, Jaylon","Jain, Manya","Jayakumar, Girish","Jeong, Wonsuk","Jothish, Maria","Kalagara, Sreehitha","Kalemera, Elizabeth Laurent","Kamina, Justin M","Kang, Hoyeon","Kang, Jenna Jiayi","Kang, Seonghun","Karra, Shanmukh","Katyal, Aadi Rishi","Kejriwal, Veer","Kim, Alex Ju Sung","Kim, Juseok"],["Kim, Minjun Andrew","Kotova, Anastasiia","Kramer, Victor Jullian","Kwarteng, Jocelyn Twumuaa","Kwon, Daeyong","Le, Jonathan Van","Lee, Uzu","Leng, Andrew","Leonick, Michael James","Li, Yuxuan","Liang, Mathew","Lin, Christie","Lin, Cliff Mingzhi","Lin, Nathan","Liu, Songyuan","Liu, Yunsong","Lup, Dragos","Maddireddy, Pranay","Mai, Allen Tuan Quoc","Mathur, Krish"],["May, James Douglas","Metlapalli, Neha Prabhakar","Moore, Elanor Megan","Moussa, Sami","Nair, Ari","Nanduri, Siddarth","Nardomarino, Jake Thomas","Nathan, Kashyap","Nawal, Raima","Nguyen, Albert K","Nguyen, Hieu","Nguyen, Hoangyen Anna","Nguyen, Lan Hoang","Ogbazghi, Sirak Teferi","Ong, Zhenmei","Orozco, Tessa Gretchen","Ovadia, Gal","Palmer, Olando Sharome II","Panackal, Savanna A","Park, Jisan"],["Park, Shinyoung","Patrick, Gray Hudson","Phanhthourath, Phillip Stefan","Prabhakar, Meenakshi Luckshmy","Pu, Huanzhi","Pujari, Sarang Raghavendra","Ragazino, James David","Rao, Sohum Milind","Richard, Cade W","Saavedra, Roland Augustus","Samuel, Joshua Rohan","Sanavandi, Keon","Scarlatescu, Erik Anthony","Seibou, Ebadallah C","Shaikh, Haroon","Shankar, Anushya","Shao, Samuel Dehua","Shelton, Jeffrey Conner","Shi, Jonathan Yuxuan","Shin, Shana Gah Young"],["Simon, Jordan Alyssa","Singh, Aayush Prakash","Singhal, Stuti","Siripurapu, Laltih Narayan","Song, Lining","Song, Mingxiao","Spektor, Alan Peter","Suda, Ken","Sukendro, Samuel Sebastian","Sun, Emily","Tarrer, Philip Cotch","Tatikola, Indira","Thompson, Tarah G","Thotakura, Keerthana","Tillery, Lesaiah Ja'lear","Tyagi, Aksh","Umrani, Rushda","Unuigboje, Omoikhosen Chizimuenu","Vallamsetti, Prisha Yashashwini","Vangala, Sai Nikhil Reddy"],["Varshney, Romir","Vatalaro, Joseph Anthony","Venkatesh, Kavya","Vyas, Nikhil","Wang, Chuyu","Wang, Xinyi","Wen, Rose R","Weston, Hugh Avery","Willingham, Christian","Xie, Feiyang","Yamjala, Nitya Reddy","Yang, Zhixuan","Zeng, Bryan Mingrui","Zhang, Benson","Zhang, Keane","Zheng, Jerry Lou","Zhou, David Runzhang","Zhuang, Qi"]],b=n(3);var j=function(){var a=Object(t.useRef)(null),e=Object(t.useState)({pdf1:null,pdf2:null,pdf3:null}),n=Object(h.a)(e,2),o=n[0],r=n[1],i=Object(t.useState)(""),d=Object(h.a)(i,2),j=d[0],S=d[1],m=Object(t.useState)(""),v=Object(h.a)(m,2),w=v[0],y=v[1],O=Object(t.useState)([]),C=Object(h.a)(O,2),k=C[0],A=C[1],x=Object(t.useState)(""),R=Object(h.a)(x,2),P=R[0],M=R[1],L=Object(t.useState)(0),D=Object(h.a)(L,2),T=D[0],J=D[1],H=Object(t.useState)(0),N=Object(h.a)(H,2),K=N[0],E=N[1],G=function(){var a=Object(u.a)(Object(c.a)().mark((function a(e){var n,t;return Object(c.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(n=e.target.files[0])){a.next=6;break}return a.next=4,n.text();case 4:t=a.sent,y(t);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),V=function(a,e){var n=a.target.files[0];r((function(a){return Object(l.a)(Object(l.a)({},a),{},Object(s.a)({},e,n))}))};function B(){return B=Object(u.a)(Object(c.a)().mark((function a(){var e,n,t,r,i,s,l,u,h,d,p,b,j,S,m,v,w;return Object(c.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("Called load pdfs"),!(o.pdf1&&o.pdf2&&o.pdf3)){a.next=4;break}a.next=6;break;case 4:return alert("Please select all three PDF files."),a.abrupt("return");case 6:e=[URL.createObjectURL(o.pdf1),URL.createObjectURL(o.pdf2),URL.createObjectURL(o.pdf3)],n=[],t=0;case 9:if(!(t<e.length)){a.next=45;break}return r=e[t],a.next=13,f.a.getDocument(r).promise;case 13:i=a.sent,s=i.numPages,l=[],M("Loading PDF #"+(t+1).toString()+" page "),E(s),u=1;case 19:if(!(u<=s)){a.next=41;break}return J(u),a.next=23,i.getPage(u);case 23:return h=a.sent,d=h.getViewport({scale:1.5}),p=document.createElement("canvas"),b=p.getContext("2d"),p.width=d.width,p.height=d.height,j={canvasContext:b,viewport:d},S=h.render(j),a.next=33,S.promise;case 33:m=b.getImageData(0,0,p.width,p.height),(v=new g.a.Mat(p.height,p.width,g.a.CV_8UC4)).data.set(m.data),w=I(v),l.push(w);case 38:u++,a.next=19;break;case 41:n.push(l);case 42:t++,a.next=9;break;case 45:E(0),A(n),console.log(n),console.log("PDFs are loaded.");case 49:case"end":return a.stop()}}),a)}))),B.apply(this,arguments)}function F(a){for(var e=-1e4,n=-1,t=1e4,o=-1,r=0;r<a.data32S.length;r+=2){var i=a.data32S[r];i<t&&(t=i,o=r),i>e&&(e=i,n=r)}return[o,n]}function I(a){var e=new g.a.Mat;g.a.cvtColor(a,e,g.a.COLOR_RGBA2GRAY,0);var n=new g.a.Mat,t=new g.a.Size(5,5);g.a.GaussianBlur(e,n,t,0,0,g.a.BORDER_DEFAULT);var o=new g.a.Mat;g.a.adaptiveThreshold(n,o,255,g.a.ADAPTIVE_THRESH_GAUSSIAN_C,g.a.THRESH_BINARY_INV,11,2);var r=g.a.Mat.zeros(a.rows,a.cols,g.a.CV_8UC3),i=new g.a.Mat,s=new g.a.Scalar(255,0,0);g.a.HoughLinesP(o,i,1,Math.PI/180,2,10,0);for(var l=0;l<i.rows;++l){var c=new g.a.Point(i.data32S[4*l],i.data32S[4*l+1]),u=new g.a.Point(i.data32S[4*l+2],i.data32S[4*l+3]);g.a.line(r,c,u,s)}var d=new g.a.Mat,f=g.a.getStructuringElement(g.a.MORPH_RECT,new g.a.Size(25,1)),p=new g.a.Mat;g.a.morphologyEx(o,p,g.a.MORPH_OPEN,f,new g.a.Point(-1,-1),2);var b=new g.a.MatVector;g.a.findContours(p,b,d,g.a.RETR_EXTERNAL,g.a.CHAIN_APPROX_SIMPLE);for(var j=-1,S=1e4,m=-1,v=-1e4,w=0;w<b.size();++w){var y=b.get(w).data32S[1];y>30&&(y<S&&(S=y,j=w),y>v&&(v=y,m=w))}var O=F(b.get(m)),C=Object(h.a)(O,2),k=C[0],A=C[1],x=F(b.get(j)),R=Object(h.a)(x,2),P=R[0],M=R[1],L=b.get(j),D=b.get(m),T=[L.data32S[P],L.data32S[P+1],L.data32S[M],L.data32S[M+1],D.data32S[A],D.data32S[A+1],D.data32S[k],D.data32S[k+1]];g.a.drawContours(r,b,-1,new g.a.Scalar(0,255,0,255),3);for(var J=0;J<4;++J){var H=new g.a.Point(T[2*J],T[2*J+1]),N=new g.a.Point(T[2*J+2],T[2*J+3]);g.a.line(r,H,N,new g.a.Scalar(0,0,255,255))}var K=g.a.matFromArray(4,1,g.a.CV_32FC2,[0,0,a.cols,0,a.cols,a.rows,0,a.rows]),E=g.a.matFromArray(4,1,g.a.CV_32FC2,T),G=g.a.getPerspectiveTransform(E,K),V=new g.a.Mat;return g.a.warpPerspective(a,V,G,new g.a.Size(a.cols,a.rows)),r.delete(),e.delete(),n.delete(),o.delete(),V}Object(t.useEffect)((function(){document.title="Attendance Helper",f.a.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.js"}));var _=Object(b.jsx)("p",{});0!==K&&(_=Object(b.jsxs)("p",{children:[P,T,"/",K]}));var U=Object(b.jsx)(b.Fragment,{}),z=Object(b.jsx)(b.Fragment,{}),Y=Object(b.jsx)(b.Fragment,{});return 0!==k.length?(U=Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Combined sheet:"}),Object(b.jsx)("canvas",{ref:a,id:"outputCanvas1"})]}),Y=Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Input Names"}),Object(b.jsxs)("form",{onSubmit:function(a){a.preventDefault(),function(){if(console.log("Manually entered textNames:",j),console.log("Names from uploaded file:",w),console.log(k),""!==j||""!==w){var a="";a=""===j?w:j,console.log("TF"),console.log(a),a=a.split("\n"),console.log(a);for(var e=[],n=0;n<k.length;n++)console.log(k),console.log(k[n]),e.push(new g.a.Mat(63*a.length,4*k[n][0].cols,g.a.CV_8UC4));for(var t=0;t<a.length;t++){var o=a[t],r=[],i=[],s=[],l=[];for(n=0;n<p.length;n++)for(var c=0;c<p[n].length;c++)p[n][c]===o&&(l=[n,c],0===n&&(l=[n,c+1]));if(console.log(l),0!==l.length){for(console.log(o),console.log(k.length),n=0;n<k.length;n++){var u=k[n][l[0]].rows,h=k[n][l[0]].cols,d=u/p[l[0]].length;0===l[0]&&(d=u/(p[l[0]].length+1));var f=new g.a.Rect(0,d*l[1],390*h/917,d),b=new g.a.Rect(393*h/917,d*l[1],270*h/917,d),S=new g.a.Rect(663*h/917,d*l[1],254*h/917,d),m=k[n][l[0]].roi(f),v=k[n][l[0]].roi(b),y=k[n][l[0]].roi(S);r.push(m),i.push(v),s.push(y)}for(n=0;n<1;n++){e[n].cols,console.log("DOING ROI"),console.log(e[n].cols),console.log(e[n].rows);var O=e[n].roi(new g.a.Rect(0,60*t,r[n].cols,r[n].rows));r[n].copyTo(O);var C=e[n].roi(new g.a.Rect(r[n].cols,60*t,i[n].cols,i[n].rows));i[n].copyTo(C);var A=e[n].roi(new g.a.Rect(r[n].cols+i[n].cols,60*t,s[n].cols,s[n].rows));s[n].copyTo(A);var x=e[n].roi(new g.a.Rect(r[n].cols+i[n].cols+s[n].cols+25,60*t,i[1].cols,i[1].rows));i[1].copyTo(x);var R=e[n].roi(new g.a.Rect(r[n].cols+i[n].cols+s[n].cols+25+i[1].cols,60*t,s[1].cols,s[1].rows));s[1].copyTo(R);var P=e[n].roi(new g.a.Rect(r[n].cols+i[n].cols+s[n].cols+25+i[1].cols+s[1].cols+25,60*t,i[2].cols,i[2].rows));i[2].copyTo(P);var M=e[n].roi(new g.a.Rect(r[n].cols+i[n].cols+s[n].cols+25+i[1].cols+s[1].cols+25+i[2].cols,60*t,s[2].cols,s[2].rows));s[2].copyTo(M)}}else alert("Could not find name in roster: "+o)}for(n=1;n<=1;n++)g.a.imshow("outputCanvas"+n.toString(),e[n-1])}else alert("Please enter your students' textNames in the textbox below or by uploading a file.")}()},children:[Object(b.jsx)("textarea",{rows:"10",cols:"40",placeholder:"Enter student names, one per line",value:j,onChange:function(a){S(a.target.value)}}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"file",accept:".txt",onChange:G}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"submit",children:"Submit"})]})]})):z=Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Upload attendance sheets:"}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"file",accept:".pdf",onChange:function(a){return V(a,"pdf1")}})}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"file",accept:".pdf",onChange:function(a){return V(a,"pdf2")}})}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"file",accept:".pdf",onChange:function(a){return V(a,"pdf3")}})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){return B.apply(this,arguments)},children:"Process PDFs"})})]}),Object(b.jsxs)("div",{className:"mainContent",children:[U,_,z,Y]})},S=function(a){a&&a instanceof Function&&n.e(3).then(n.bind(null,265)).then((function(e){var n=e.getCLS,t=e.getFID,o=e.getFCP,r=e.getLCP,i=e.getTTFB;n(a),t(a),o(a),r(a),i(a)}))};i.a.createRoot(document.getElementById("root")).render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(j,{})})),S()},62:function(a,e){}},[[262,1,2]]]);
//# sourceMappingURL=main.e0886140.chunk.js.map